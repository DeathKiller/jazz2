<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Jazz² Resurrection</title>

    <link rel="shortcut icon" id="favicon" type="image/png" href="./favicon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

    <link href="/frontend/style.css?v=24" rel="stylesheet">
    <style>
        html, body {
            height: unset;
        }

        #game-container {
            display: block;
            position: relative;
            width: 720px;
            height: 405px;
            margin: 70px auto 10px;
            text-align: center;

            font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;
            font-size: .74em;

            color: #AAA;
            background: #FFF;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.6);
        }

        .info-screen {
            display: block;
            position: absolute;
            width: 100%;
            height: 100%;
            font-size: 120%;
            font-weight: bold;
            text-align: center;
            z-index: 100;
            background: #FFF;
            background: radial-gradient(#fff 70%, #eee);

            transition: 1s opacity;
        }

        .jazz2-logo {
            display: block;
            margin: 33px auto 80px;
            transform: translateX(-5px);
        }

        #game {
            position: absolute;
            left: 0;
            background: #FFF;
            z-index: 10;
        }

        .more-info {
            padding: 10px;
            text-align: center;

            font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;
            font-size: .74em;
        }

        body.no-webgl #game {
            display: none;
        }
        body.ready .info-screen {
            opacity: 0;
        }
    </style>

    <script src="runtime.js"></script>
    <script defer src="scripts/mono_support.js"></script>
    <script defer src="scripts/SkiaSharp.js"></script>
    <script defer src="canvaskit.js"></script>
    <script defer src="mono.js"></script>
</head>
<body>
    <div id="game-container">
        <div class="info-screen">
            <img src="../images/logo.gif" class="jazz2-logo" draggable="false">
            <span id="info-message">Loading runtime…</span>
        </div>
    </div>
    <div class="more-info">
        This is a WebAssembly port of <b>Jazz² Resurrection</b>. Further information can be found <a href="http://deat.tk/jazz2/">here</a>.<br>
        It requires Chrome 57+, Firefox 53+ or other browser supporting <i>WebAssembly</i> and <i>WebGL</i>.<br><br>
        This preview uses the game data coming from <b>Jazz Jackrabbit 2 Shareware Demo</b> available for free.<br>
        The original <code>LICENSE.TXT</code> file of the demo can be found <a href="license.txt" target="_blank">here</a>.<br><br>
        <i>This is a technical preview and might have some bugs and lower performance that will be resolved in final release.</i>
    </div>

    <script>
        if (typeof WebAssembly !== "object" || typeof WebAssembly.instantiate !== "function") {
            document.body.className += " no-wasm";
            document.getElementById("info-message").innerHTML = "Your browser does not support WebAssembly";
        }

        var App = {
            init: function() {
                document.getElementById("info-message").innerHTML = "Loading game assets…";

                BINDING.call_static_method("[Jazz2.Wasm] Jazz2.Game.App:Main", []);
            },
            loadingProgress: function(percentage) {
                document.getElementById("info-message").innerHTML = "Loading game assets…<br><small>" + percentage + "%</small>";
            },
            loadingFailed: function(percentage) {
                document.getElementById("info-message").innerHTML = "Cannot load game assets :(";
            },
            ready: function() {
                document.body.className += " ready";
            },
            webglNotSupported: function() {
                document.body.className += " no-webgl";
                document.getElementById("info-message").innerHTML = "Your browser does not support WebGL";
            }
        };
    </script>
</body>
</html>